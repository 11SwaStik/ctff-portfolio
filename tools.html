
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Hacker Toolkit — Swastik</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <div class="bg-gradient"></div>
  <div class="bg-orb orb-a"></div>
  <div class="bg-orb orb-b"></div>
  <div class="bg-orb orb-c"></div>
  <div class="scanlines"></div>

  <a class="skip-btn" href="index.html">← Back to CTF</a>

  <header class="header">
    <h1 class="typewriter">> toolkit: <span class="glitch" data-text="decode_analyze_reveal">decode_analyze_reveal</span></h1>
  </header>

  <main class="terminal grid">
    <section class="card">
      <div class="card-corners"></div>
      <h2>Caesar / ROT-N</h2>
      <div class="controls">
        <input id="caesarText" placeholder="Encrypted text (e.g., sjts)" />
        <input id="shift" type="number" value="5" />
        <button onclick="decodeCaesar()">decode</button>
      </div>
      <p id="caesarResult" class="result"></p>
    </section>

    <section class="card">
      <div class="card-corners"></div>
      <h2>Base64 Decoder</h2>
      <div class="controls">
        <input id="base64Text" placeholder="Base64 text" />
        <button onclick="decodeBase64()">decode</button>
      </div>
      <p id="base64Result" class="result"></p>
    </section>

    <section class="card">
      <div class="card-corners"></div>
      <h2>Reverse String</h2>
      <div class="controls">
        <input id="reverseText" placeholder="Enter text" />
        <button onclick="reverseText()">reverse</button>
      </div>
      <p id="reverseResult" class="result"></p>
    </section>

    <section class="card">
      <div class="card-corners"></div>
      <h2>PNG Inspector (tEXt chunk)</h2>
      <p class="muted">Choose a PNG (e.g., <code>ctf_stego.png</code>) to reveal embedded text chunks.</p>
      <div class="controls">
        <input id="pngFile" type="file" accept="image/png" />
        <button onclick="inspectPNG()">inspect</button>
      </div>
      <pre id="pngOut" class="result" style="white-space:pre-wrap"></pre>
    </section>
  </main>

  <footer class="footer">
    <small>© <span id="year"></span> Swastik Sharma · Toolkit</small>
  </footer>

  <script>
    function decodeCaesar() {
      const text = document.getElementById("caesarText").value || "";
      const shift = parseInt(document.getElementById("shift").value || "0", 10);
      let out = "";
      for (let i = 0; i < text.length; i++) {
        const c = text.charCodeAt(i);
        if (c >= 65 && c <= 90) out += String.fromCharCode((c - 65 - shift + 26) % 26 + 65);
        else if (c >= 97 && c <= 122) out += String.fromCharCode((c - 97 - shift + 26) % 26 + 97);
        else out += text[i];
      }
      document.getElementById("caesarResult").innerText = "Decoded: " + out;
    }
    function decodeBase64() {
      try {
        const t = document.getElementById("base64Text").value || "";
        document.getElementById("base64Result").innerText = "Decoded: " + atob(t);
      } catch {
        document.getElementById("base64Result").innerText = "Invalid Base64";
      }
    }
    function reverseText() {
      const t = document.getElementById("reverseText").value || "";
      document.getElementById("reverseResult").innerText = "Reversed: " + t.split("").reverse().join("");
    }
    // Minimal PNG parser for tEXt chunks
    async function inspectPNG(){
      const f = document.getElementById('pngFile').files[0];
      if(!f){ document.getElementById('pngOut').textContent = 'No file selected.'; return; }
      const buf = new Uint8Array(await f.arrayBuffer());
      const out = [];
      const sig = [137,80,78,71,13,10,26,10];
      for(let i=0;i<8;i++){ if(buf[i]!==sig[i]){ document.getElementById('pngOut').textContent='Not a PNG.'; return; } }
      let p=8;
      while(p < buf.length){
        const len = (buf[p]<<24)|(buf[p+1]<<16)|(buf[p+2]<<8)|buf[p+3]; p+=4;
        const type = String.fromCharCode(buf[p],buf[p+1],buf[p+2],buf[p+3]); p+=4;
        const data = buf.slice(p, p+len); p+=len;
        const crc = buf.slice(p, p+4); p+=4;
        if(type==='tEXt'){
          // tEXt = "keyword\0text"
          const zero = data.indexOf(0);
          const key = new TextDecoder().decode(data.slice(0,zero));
          const val = new TextDecoder().decode(data.slice(zero+1));
          out.push(`${key}: ${val}`);
        }
      }
      document.getElementById('pngOut').textContent = out.length ? out.join('\n') : 'No tEXt chunks found.';
    }
    document.getElementById("year").textContent = new Date().getFullYear();
  </script>
</body>
</html>
